<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="An arena of variables and expressions."><title>Arena in clausy::core::arena - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../../static.files/rustdoc-9bb858ba049f1f21.css" id="mainThemeStyle"><meta name="rustdoc-vars" data-root-path="../../../" data-static-root-path="../../../static.files/" data-current-crate="clausy" data-themes="" data-resource-suffix="" data-rustdoc-version="1.72.0 (5680fa18f 2023-08-23)" data-channel="1.72.0" data-search-js="search-f6292fe389d70017.js" data-settings-js="settings-de11bff964e9d4e5.js" data-settings-css="settings-8c76f75bfb6bd192.css" data-theme-light-css="light-0f8c037637f9eb3e.css" data-theme-dark-css="dark-1097f8e92a01e3cf.css" data-theme-ayu-css="ayu-614652228113ac93.css" ><script src="../../../static.files/storage-59fd9b8ccb335783.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../../static.files/main-0795b7d26be81095.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../../../static.files/light-0f8c037637f9eb3e.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../../../static.files/dark-1097f8e92a01e3cf.css"><link rel="stylesheet" href="../../../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc struct"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../../../clausy/index.html"><img class="rust-logo" src="../../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../../../clausy/index.html"><img class="rust-logo" src="../../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Arena</a></h2><div class="sidebar-elems"><section><h3><a href="#fields">Fields</a></h3><ul class="block"><li><a href="#structfield.exprs">exprs</a></li><li><a href="#structfield.exprs_inv">exprs_inv</a></li><li><a href="#structfield.new_exprs">new_exprs</a></li><li><a href="#structfield.new_vars">new_vars</a></li><li><a href="#structfield.var_aux_id">var_aux_id</a></li><li><a href="#structfield.vars">vars</a></li><li><a href="#structfield.vars_inv">vars_inv</a></li></ul><h3><a href="#implementations">Methods</a></h3><ul class="block"><li><a href="#method.add_expr">add_expr</a></li><li><a href="#method.add_var">add_var</a></li><li><a href="#method.add_var_aux">add_var_aux</a></li><li><a href="#method.add_var_aux_expr">add_var_aux_expr</a></li><li><a href="#method.add_var_named">add_var_named</a></li><li><a href="#method.as_formula">as_formula</a></li><li><a href="#method.canon_visitor">canon_visitor</a></li><li><a href="#method.cnf_dist_visitor">cnf_dist_visitor</a></li><li><a href="#method.cnf_tseitin_visitor">cnf_tseitin_visitor</a></li><li><a href="#method.def_and">def_and</a></li><li><a href="#method.def_or">def_or</a></li><li><a href="#method.expr">expr</a></li><li><a href="#method.flatten_expr">flatten_expr</a></li><li><a href="#method.format_expr">format_expr</a></li><li><a href="#method.get_expr">get_expr</a></li><li><a href="#method.get_var_named">get_var_named</a></li><li><a href="#method.inval_expr">inval_expr</a></li><li><a href="#method.negate_exprs">negate_exprs</a></li><li><a href="#method.new">new</a></li><li><a href="#method.nnf_visitor">nnf_visitor</a></li><li><a href="#method.postorder_rev">postorder_rev</a></li><li><a href="#method.preorder_rev">preorder_rev</a></li><li><a href="#method.prepostorder_rev">prepostorder_rev</a></li><li><a href="#method.set_expr">set_expr</a></li><li><a href="#method.simp_expr">simp_expr</a></li><li><a href="#method.var_expr">var_expr</a></li><li><a href="#method.var_expr_with_id">var_expr_with_id</a></li><li><a href="#method.vars">vars</a></li></ul><h3><a href="#trait-implementations">Trait Implementations</a></h3><ul class="block"><li><a href="#impl-FormulaParsee-for-Arena">FormulaParsee</a></li></ul><h3><a href="#synthetic-implementations">Auto Trait Implementations</a></h3><ul class="block"><li><a href="#impl-RefUnwindSafe-for-Arena">RefUnwindSafe</a></li><li><a href="#impl-Send-for-Arena">Send</a></li><li><a href="#impl-Sync-for-Arena">Sync</a></li><li><a href="#impl-Unpin-for-Arena">Unpin</a></li><li><a href="#impl-UnwindSafe-for-Arena">UnwindSafe</a></li></ul><h3><a href="#blanket-implementations">Blanket Implementations</a></h3><ul class="block"><li><a href="#impl-Any-for-Arena">Any</a></li><li><a href="#impl-Borrow%3CT%3E-for-Arena">Borrow&lt;T&gt;</a></li><li><a href="#impl-BorrowMut%3CT%3E-for-Arena">BorrowMut&lt;T&gt;</a></li><li><a href="#impl-From%3CT%3E-for-Arena">From&lt;T&gt;</a></li><li><a href="#impl-Into%3CU%3E-for-Arena">Into&lt;U&gt;</a></li><li><a href="#impl-TryFrom%3CU%3E-for-Arena">TryFrom&lt;U&gt;</a></li><li><a href="#impl-TryInto%3CU%3E-for-Arena">TryInto&lt;U&gt;</a></li></ul></section><h2><a href="index.html">In clausy::core::arena</a></h2></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Struct <a href="../../index.html">clausy</a>::<wbr><a href="../index.html">core</a>::<wbr><a href="index.html">arena</a>::<wbr><a class="struct" href="#">Arena</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../../../src/clausy/core/arena.rs.html#77-134">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub(crate) struct Arena {
    pub(super) vars: <a class="struct" href="https://doc.rust-lang.org/1.72.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="enum" href="../var/enum.Var.html" title="enum clausy::core::var::Var">Var</a>&gt;,
    vars_inv: <a class="struct" href="https://doc.rust-lang.org/1.72.0/std/collections/hash/map/struct.HashMap.html" title="struct std::collections::hash::map::HashMap">HashMap</a>&lt;<a class="enum" href="../var/enum.Var.html" title="enum clausy::core::var::Var">Var</a>, <a class="primitive" href="https://doc.rust-lang.org/1.72.0/std/primitive.i32.html">i32</a>&gt;,
    pub(super) exprs: <a class="struct" href="https://doc.rust-lang.org/1.72.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="enum" href="../expr/enum.Expr.html" title="enum clausy::core::expr::Expr">Expr</a>&gt;,
    exprs_inv: <a class="struct" href="https://doc.rust-lang.org/1.72.0/std/collections/hash/map/struct.HashMap.html" title="struct std::collections::hash::map::HashMap">HashMap</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.72.0/std/primitive.u64.html">u64</a>, <a class="struct" href="https://doc.rust-lang.org/1.72.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.72.0/std/primitive.usize.html">usize</a>&gt;&gt;,
    var_aux_id: <a class="primitive" href="https://doc.rust-lang.org/1.72.0/std/primitive.u32.html">u32</a>,
    pub(super) new_vars: <a class="enum" href="https://doc.rust-lang.org/1.72.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.72.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.72.0/std/primitive.i32.html">i32</a>&gt;&gt;,
    pub(super) new_exprs: <a class="enum" href="https://doc.rust-lang.org/1.72.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.72.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.72.0/std/primitive.usize.html">usize</a>&gt;&gt;,
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>An arena of variables and expressions.</p>
<p>We aim to represent any <a href="../formula/struct.Formula.html" title="struct clausy::core::formula::Formula">Formula</a> by storing its syntax tree; that is, each unique sub-expression that appears in it.
To allow reuse of expressions and variables across similar formulas, we store them in a shared
<a href="https://en.wikipedia.org/wiki/Region-based_memory_management">arena</a> referenced by each <a href="../formula/struct.Formula.html" title="struct clausy::core::formula::Formula">Formula</a>.
In a canonical <a href="../formula/struct.Formula.html" title="struct clausy::core::formula::Formula">Formula</a>, sub-expressions are uniquely stored, so no sub-expression appears twice with distinct identifiers (structural sharing).
This allows for concise representation and facilitates some algorithms (e.g., <a href="../formula/struct.Formula.html#method.to_cnf_tseitin" title="method clausy::core::formula::Formula::to_cnf_tseitin">Formula::to_cnf_tseitin</a>).
However, it also comes with the downside that each sub-expression has potentially many parents.
Thus, owners of sub-expressions are not easily trackable (see <a href="struct.Arena.html#structfield.exprs" title="field clausy::core::arena::Arena::exprs">Arena::exprs</a> on garbage collection).
Consequently, we cannot access any parents when mutating sub-expressions, only children.
Due to structural sharing, we effectively treat the syntax tree as a directed acyclic graph.
We represent this graph as an adjacency list stored in <a href="struct.Arena.html#structfield.exprs" title="field clausy::core::arena::Arena::exprs">Arena::exprs</a>.
Note that, for performance reasons, structural sharing is not guaranteed by all algorithms (including parsers) until calling <a href="struct.Arena.html#method.canon_visitor" title="method clausy::core::arena::Arena::canon_visitor">Arena::canon_visitor</a>.</p>
</div></details><h2 id="fields" class="fields small-section-header">Fields<a href="#fields" class="anchor">§</a></h2><span id="structfield.vars" class="structfield small-section-header"><a href="#structfield.vars" class="anchor field">§</a><code>vars: <a class="struct" href="https://doc.rust-lang.org/1.72.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="enum" href="../var/enum.Var.html" title="enum clausy::core::var::Var">Var</a>&gt;</code></span><div class="docblock"><p>Stores all variables in this arena.</p>
<p>Conceptually, this is analogous to <a href="struct.Arena.html#structfield.exprs" title="field clausy::core::arena::Arena::exprs">Arena::exprs</a>.
Accordingly, the set of variables referenced by a given <a href="../formula/struct.Formula.html" title="struct clausy::core::formula::Formula">Formula</a> constitutes its sub-variables (see <a href="../formula/struct.Formula.html#structfield.sub_var_ids" title="field clausy::core::formula::Formula::sub_var_ids">Formula::sub_var_ids</a>).
Variable-forgetting operations, such as feature-model slicing, are possible by adapting this set.</p>
</div><span id="structfield.vars_inv" class="structfield small-section-header"><a href="#structfield.vars_inv" class="anchor field">§</a><code>vars_inv: <a class="struct" href="https://doc.rust-lang.org/1.72.0/std/collections/hash/map/struct.HashMap.html" title="struct std::collections::hash::map::HashMap">HashMap</a>&lt;<a class="enum" href="../var/enum.Var.html" title="enum clausy::core::var::Var">Var</a>, <a class="primitive" href="https://doc.rust-lang.org/1.72.0/std/primitive.i32.html">i32</a>&gt;</code></span><div class="docblock"><p>Maps variables to their identifiers.</p>
<p>Conceptually, this is analogous to <a href="struct.Arena.html#structfield.exprs_inv" title="field clausy::core::arena::Arena::exprs_inv">Arena::exprs_inv</a>.
However, we simplify the inverse lookup of variables by cloning variables.
This needs more memory, but (a) we do not expect many variables and (b) this avoids the hash collisions discussed for <a href="struct.Arena.html#structfield.exprs_inv" title="field clausy::core::arena::Arena::exprs_inv">Arena::exprs_inv</a>.
Also, variables and their identifiers are never mutated after creation, so we need no additional <a href="https://doc.rust-lang.org/1.72.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a> for updates.</p>
</div><span id="structfield.exprs" class="structfield small-section-header"><a href="#structfield.exprs" class="anchor field">§</a><code>exprs: <a class="struct" href="https://doc.rust-lang.org/1.72.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="enum" href="../expr/enum.Expr.html" title="enum clausy::core::expr::Expr">Expr</a>&gt;</code></span><div class="docblock"><p>Stores all expressions in this arena.</p>
<p>Serves as a fast lookup for an expression, given its identifier.
Expressions are stored in the order of their creation, so new expressions are appended with <a href="https://doc.rust-lang.org/1.72.0/alloc/vec/struct.Vec.html#method.push" title="method alloc::vec::Vec::push">Vec::push</a>.
Also, while algorithms may update expressions in-place, no expression is ever removed.
We refer to all expressions that appear below the root expression of a <a href="../formula/struct.Formula.html" title="struct clausy::core::formula::Formula">Formula</a> as its sub-expressions (including the root expression).
By not ever removing any expressions, we keep all non-sub-expressions indefinitely.
This potentially requires a lot of memory, but avoids explicit reference counting or garbage collection.</p>
</div><span id="structfield.exprs_inv" class="structfield small-section-header"><a href="#structfield.exprs_inv" class="anchor field">§</a><code>exprs_inv: <a class="struct" href="https://doc.rust-lang.org/1.72.0/std/collections/hash/map/struct.HashMap.html" title="struct std::collections::hash::map::HashMap">HashMap</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.72.0/std/primitive.u64.html">u64</a>, <a class="struct" href="https://doc.rust-lang.org/1.72.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.72.0/std/primitive.usize.html">usize</a>&gt;&gt;</code></span><div class="docblock"><p>Maps expressions to their identifiers.</p>
<p>Serves as a fast inverse lookup for the unique identifier of a given sub-expression.
To simplify ownership, we implement this lookup by mapping from the hash of a sub-expression to several identifiers.
By structural sharing, the identifier for a sub-expression should be unique, but we still need a <a href="https://doc.rust-lang.org/1.72.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a> for two reasons:
First, there might be hash collisions, which we address by checking true equality when reading <a href="struct.Arena.html#structfield.exprs_inv" title="field clausy::core::arena::Arena::exprs_inv">Arena::exprs_inv</a>.
Second, while sub-expressions have a unique identifier, there might be distinct, orphaned expressions that are equal to a given sub-expression.
For example, such a situation arises when <a href="struct.Arena.html#method.set_expr" title="method clausy::core::arena::Arena::set_expr">Arena::set_expr</a> modifies a sub-expression
and the resulting expression is equal (but not identical) to an existing sub-expression.
As an expression cannot easily update its own identifier in the whole syntax tree,
<a href="struct.Arena.html#method.set_expr" title="method clausy::core::arena::Arena::set_expr">Arena::set_expr</a> considers the first identifier in <a href="struct.Arena.html#structfield.exprs_inv" title="field clausy::core::arena::Arena::exprs_inv">Arena::exprs_inv</a> to be the canonical one (modulo hash collisions).
Whenever <a href="struct.Arena.html#method.set_expr" title="method clausy::core::arena::Arena::set_expr">Arena::set_expr</a> encounters the concerned expression later, it then adapts its identifier to the canonical one.
By this design, <a href="struct.Arena.html#structfield.exprs_inv" title="field clausy::core::arena::Arena::exprs_inv">Arena::exprs_inv</a> indeed maps any sub-expression (precisely: its hash) to its unique identifier
(precisely: the first identifier whose expression is equal to the given sub-expression).
This information can be used to enforce structural sharing by calling <a href="struct.Arena.html#method.canon_visitor" title="method clausy::core::arena::Arena::canon_visitor">Arena::canon_visitor</a>.</p>
</div><span id="structfield.var_aux_id" class="structfield small-section-header"><a href="#structfield.var_aux_id" class="anchor field">§</a><code>var_aux_id: <a class="primitive" href="https://doc.rust-lang.org/1.72.0/std/primitive.u32.html">u32</a></code></span><div class="docblock"><p>Specifies the identifier of the most recently added auxiliary variable.</p>
<p>Ensures that new auxiliary variables (created with <a href="../var/enum.Var.html#variant.Aux" title="variant clausy::core::var::Var::Aux">Var::Aux</a>) are uniquely identified in the context of this arena.</p>
</div><span id="structfield.new_vars" class="structfield small-section-header"><a href="#structfield.new_vars" class="anchor field">§</a><code>new_vars: <a class="enum" href="https://doc.rust-lang.org/1.72.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.72.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.72.0/std/primitive.i32.html">i32</a>&gt;&gt;</code></span><div class="docblock"><p>Temporarily stores new variables created that are not yet included in any <a href="../formula/struct.Formula.html" title="struct clausy::core::formula::Formula">Formula</a>’s syntax tree.</p>
<p>Used by <a href="struct.Arena.html#method.cnf_tseitin_visitor" title="method clausy::core::arena::Arena::cnf_tseitin_visitor">Arena::cnf_tseitin_visitor</a> for holding on to auxiliary variables.</p>
</div><span id="structfield.new_exprs" class="structfield small-section-header"><a href="#structfield.new_exprs" class="anchor field">§</a><code>new_exprs: <a class="enum" href="https://doc.rust-lang.org/1.72.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.72.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.72.0/std/primitive.usize.html">usize</a>&gt;&gt;</code></span><div class="docblock"><p>Temporarily stores new expressions that are not yet included in any <a href="../formula/struct.Formula.html" title="struct clausy::core::formula::Formula">Formula</a>’s syntax tree.</p>
<p>Used by <a href="struct.Arena.html#method.cnf_tseitin_visitor" title="method clausy::core::arena::Arena::cnf_tseitin_visitor">Arena::cnf_tseitin_visitor</a> for holding on to definitional expressions.</p>
</div><h2 id="implementations" class="small-section-header">Implementations<a href="#implementations" class="anchor">§</a></h2><div id="implementations-list"><details class="toggle implementors-toggle" open><summary><section id="impl-Arena" class="impl"><a class="srclink rightside" href="../../../src/clausy/core/arena.rs.html#136-601">source</a><a href="#impl-Arena" class="anchor">§</a><h3 class="code-header">impl <a class="struct" href="struct.Arena.html" title="struct clausy::core::arena::Arena">Arena</a></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.new" class="method"><a class="srclink rightside" href="../../../src/clausy/core/arena.rs.html#140-150">source</a><h4 class="code-header">pub(crate) fn <a href="#method.new" class="fn">new</a>() -&gt; Self</h4></section></summary><div class="docblock"><p>Creates a new, empty arena.</p>
<p>This simplifies the representation of literals in <a href="../clauses/struct.Clauses.html" title="struct clausy::core::clauses::Clauses">crate::core::clauses::Clauses</a>, which can be negative.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.add_var" class="method"><a class="srclink rightside" href="../../../src/clausy/core/arena.rs.html#155-161">source</a><h4 class="code-header">fn <a href="#method.add_var" class="fn">add_var</a>(&amp;mut self, var: <a class="enum" href="../var/enum.Var.html" title="enum clausy::core::var::Var">Var</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.72.0/std/primitive.i32.html">i32</a></h4></section></summary><div class="docblock"><p>Adds a new variable to this arena, returning its identifier.</p>
<p>Works analogously to <a href="struct.Arena.html#method.add_expr" title="method clausy::core::arena::Arena::add_expr">Arena::add_expr</a> (see <a href="struct.Arena.html#structfield.vars_inv" title="field clausy::core::arena::Arena::vars_inv">Arena::vars_inv</a>).</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.add_var_named" class="method"><a class="srclink rightside" href="../../../src/clausy/core/arena.rs.html#164-166">source</a><h4 class="code-header">fn <a href="#method.add_var_named" class="fn">add_var_named</a>(&amp;mut self, name: <a class="struct" href="https://doc.rust-lang.org/1.72.0/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.72.0/std/primitive.i32.html">i32</a></h4></section></summary><div class="docblock"><p>Adds a new named variable to this arena, returning its identifier.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.add_var_aux" class="method"><a class="srclink rightside" href="../../../src/clausy/core/arena.rs.html#169-172">source</a><h4 class="code-header">pub(super) fn <a href="#method.add_var_aux" class="fn">add_var_aux</a>(&amp;mut self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.72.0/std/primitive.i32.html">i32</a></h4></section></summary><div class="docblock"><p>Adds a new auxiliary variable to this arena, returning its identifier.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.get_var_named" class="method"><a class="srclink rightside" href="../../../src/clausy/core/arena.rs.html#177-179">source</a><h4 class="code-header">fn <a href="#method.get_var_named" class="fn">get_var_named</a>(&amp;mut self, name: <a class="struct" href="https://doc.rust-lang.org/1.72.0/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.72.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.72.0/std/primitive.i32.html">i32</a>&gt;</h4></section></summary><div class="docblock"><p>Looks ups the identifier of a named variable in this arena.</p>
<p>Works analogously to <a href="struct.Arena.html#method.get_expr" title="method clausy::core::arena::Arena::get_expr">Arena::get_expr</a> (see <a href="struct.Arena.html#structfield.vars_inv" title="field clausy::core::arena::Arena::vars_inv">Arena::vars_inv</a>).</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.var_expr" class="method"><a class="srclink rightside" href="../../../src/clausy/core/arena.rs.html#184-189">source</a><h4 class="code-header">pub(crate) fn <a href="#method.var_expr" class="fn">var_expr</a>(&amp;mut self, var: <a class="struct" href="https://doc.rust-lang.org/1.72.0/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.72.0/std/primitive.usize.html">usize</a></h4></section></summary><div class="docblock"><p>Adds or looks up a named variable in this arena, returning its <a href="../var/enum.Var.html" title="enum clausy::core::var::Var">Var</a> expression’s identifier.</p>
<p>This is the preferred way to obtain a <a href="../var/enum.Var.html" title="enum clausy::core::var::Var">Var</a> expression’s identifier (see <a href="struct.Arena.html#method.expr" title="method clausy::core::arena::Arena::expr">Arena::expr</a>).</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.var_expr_with_id" class="method"><a class="srclink rightside" href="../../../src/clausy/core/arena.rs.html#192-199">source</a><h4 class="code-header">pub(crate) fn <a href="#method.var_expr_with_id" class="fn">var_expr_with_id</a>(&amp;mut self, var: <a class="struct" href="https://doc.rust-lang.org/1.72.0/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>) -&gt; (<a class="primitive" href="https://doc.rust-lang.org/1.72.0/std/primitive.usize.html">usize</a>, <a class="primitive" href="https://doc.rust-lang.org/1.72.0/std/primitive.i32.html">i32</a>)</h4></section></summary><div class="docblock"><p>Adds or looks up a named variable in this arena, returning its <a href="../var/enum.Var.html" title="enum clausy::core::var::Var">Var</a> expression’s and <a href="../var/enum.Var.html" title="enum clausy::core::var::Var">Var</a>’s identifier.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.add_var_aux_expr" class="method"><a class="srclink rightside" href="../../../src/clausy/core/arena.rs.html#202-205">source</a><h4 class="code-header">pub(crate) fn <a href="#method.add_var_aux_expr" class="fn">add_var_aux_expr</a>(&amp;mut self) -&gt; (<a class="primitive" href="https://doc.rust-lang.org/1.72.0/std/primitive.i32.html">i32</a>, <a class="primitive" href="https://doc.rust-lang.org/1.72.0/std/primitive.usize.html">usize</a>)</h4></section></summary><div class="docblock"><p>Adds a new auxiliary variable to this arena, returning its identifier and its <a href="../var/enum.Var.html" title="enum clausy::core::var::Var">Var</a> expression’s identifier.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.vars" class="method"><a class="srclink rightside" href="../../../src/clausy/core/arena.rs.html#208-221">source</a><h4 class="code-header">pub(crate) fn <a href="#method.vars" class="fn">vars</a>(
    &amp;self,
    predicate: impl <a class="trait" href="https://doc.rust-lang.org/1.72.0/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/1.72.0/std/primitive.i32.html">i32</a>, &amp;<a class="enum" href="../var/enum.Var.html" title="enum clausy::core::var::Var">Var</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.72.0/std/primitive.bool.html">bool</a>
) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.72.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;(<a class="primitive" href="https://doc.rust-lang.org/1.72.0/std/primitive.i32.html">i32</a>, <a class="enum" href="../var/enum.Var.html" title="enum clausy::core::var::Var">Var</a>)&gt;</h4></section></summary><div class="docblock"><p>Returns all variables and their identifiers in this arena that match a given predicate.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.add_expr" class="method"><a class="srclink rightside" href="../../../src/clausy/core/arena.rs.html#228-234">source</a><h4 class="code-header">fn <a href="#method.add_expr" class="fn">add_expr</a>(&amp;mut self, expr: <a class="enum" href="../expr/enum.Expr.html" title="enum clausy::core::expr::Expr">Expr</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.72.0/std/primitive.usize.html">usize</a></h4></section></summary><div class="docblock"><p>Adds a new expression to this arena, returning its new identifier.</p>
<p>Appends the given expression to <a href="struct.Arena.html#structfield.exprs" title="field clausy::core::arena::Arena::exprs">Arena::exprs</a> and enables its lookup via <a href="struct.Arena.html#structfield.exprs_inv" title="field clausy::core::arena::Arena::exprs_inv">Arena::exprs_inv</a>.
Requires that no expression equal to the given expression is already in this arena.
Thus, the created identifier will become the expression’s canonical identifier (see <a href="struct.Arena.html#structfield.exprs_inv" title="field clausy::core::arena::Arena::exprs_inv">Arena::exprs_inv</a>).</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.get_expr" class="method"><a class="srclink rightside" href="../../../src/clausy/core/arena.rs.html#240-247">source</a><h4 class="code-header">pub(super) fn <a href="#method.get_expr" class="fn">get_expr</a>(&amp;self, expr: &amp;<a class="enum" href="../expr/enum.Expr.html" title="enum clausy::core::expr::Expr">Expr</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.72.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.72.0/std/primitive.usize.html">usize</a>&gt;</h4></section></summary><div class="docblock"><p>Looks ups the identifier for an expression in this arena.</p>
<p>The canonical identifier for a given expression is the first one that is associated with its hash
and whose expression is also equal to the given expression (see <a href="struct.Arena.html#structfield.exprs_inv" title="field clausy::core::arena::Arena::exprs_inv">Arena::exprs_inv</a>).</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.expr" class="method"><a class="srclink rightside" href="../../../src/clausy/core/arena.rs.html#254-257">source</a><h4 class="code-header">pub(crate) fn <a href="#method.expr" class="fn">expr</a>(&amp;mut self, expr: <a class="enum" href="../expr/enum.Expr.html" title="enum clausy::core::expr::Expr">Expr</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.72.0/std/primitive.usize.html">usize</a></h4></section></summary><div class="docblock"><p>Adds or looks up an expression in this arena, returning its identifier.</p>
<p>This is the preferred way to obtain an expression’s identifier, as it ensures structural sharing.
That is, the expression is only added to this arena if it does not already exist.
Before we add the expression, we simplify it, which is a cheap operation (in contrast to <a href="struct.Arena.html#method.flatten_expr" title="method clausy::core::arena::Arena::flatten_expr">Arena::flatten_expr</a>).</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.simp_expr" class="method"><a class="srclink rightside" href="../../../src/clausy/core/arena.rs.html#268-280">source</a><h4 class="code-header">fn <a href="#method.simp_expr" class="fn">simp_expr</a>(&amp;mut self, expr: &amp;mut <a class="enum" href="../expr/enum.Expr.html" title="enum clausy::core::expr::Expr">Expr</a>)</h4></section></summary><div class="docblock"><p>Simplifies an expression in this arena to an equivalent one.</p>
<p>First, we sort the expression’s children, thus equality is up to commutativity.
Second, we remove duplicate children of the expressions, thus equality is up to idempotency.
Third, we identify unary expressions with their operands (i.e., <code>And(x)</code> is simplified to <code>x</code>).
Fourth, we remove double negations (i.e., <code>Not(Not(x))</code> is simplified to <code>x</code>).
Fifth, we remove obvious tautologies and contradictions (i.e., <code>And(a, Not(a))</code> is simplified to <code>Or()</code>).
Because we clone expressions, this function may violate structural sharing (see <a href="struct.Arena.html#method.canon_visitor" title="method clausy::core::arena::Arena::canon_visitor">Arena::canon_visitor</a>).
As this is a cheap and useful operation to make the arena smaller, we already call it in the parsing stage.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.flatten_expr" class="method"><a class="srclink rightside" href="../../../src/clausy/core/arena.rs.html#287-293">source</a><h4 class="code-header">fn <a href="#method.flatten_expr" class="fn">flatten_expr</a>(&amp;mut self, expr: &amp;mut <a class="enum" href="../expr/enum.Expr.html" title="enum clausy::core::expr::Expr">Expr</a>)</h4></section></summary><div class="docblock"><p>Flattens children of an expression into their parent.</p>
<p>Analogously to <a href="struct.Arena.html#method.simp_expr" title="method clausy::core::arena::Arena::simp_expr">Arena::simp_expr</a>, this performs a simplification of an expression.
However, this may create new expressions and is therefore more expensive, thus not called in the parsing stage.
This is useful to call during a postorder syntax tree traversal to ensure canonical form (see <a href="struct.Arena.html#method.canon_visitor" title="method clausy::core::arena::Arena::canon_visitor">Arena::canon_visitor</a>).</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.inval_expr" class="method"><a class="srclink rightside" href="../../../src/clausy/core/arena.rs.html#304-309">source</a><h4 class="code-header">fn <a href="#method.inval_expr" class="fn">inval_expr</a>(&amp;mut self, id: <a class="primitive" href="https://doc.rust-lang.org/1.72.0/std/primitive.usize.html">usize</a>)</h4></section></summary><div class="docblock"><p>Invalidates an expression after it was mutated.</p>
<p>Does so by updating its mapping in <a href="struct.Arena.html#structfield.exprs_inv" title="field clausy::core::arena::Arena::exprs_inv">Arena::exprs_inv</a>.
One of two cases applies, which can both be handled in the same way:
Either the new expression has never been added before, so structural sharing was not violated.
Thus, we can just append the expression’s identifier as the new canonical identifier for the expression.
In the second case, the expression already exists and already has a canonical identifier.
Still, we can append the identifier anyway, as only the first identifier will be considered.
In terms of correctness, appending the identifier suffices, although we may optimize in the future by cleaning up <a href="struct.Arena.html#structfield.exprs_inv" title="field clausy::core::arena::Arena::exprs_inv">Arena::exprs_inv</a>.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.set_expr" class="method"><a class="srclink rightside" href="../../../src/clausy/core/arena.rs.html#326-343">source</a><h4 class="code-header">fn <a href="#method.set_expr" class="fn">set_expr</a>(&amp;mut self, id: <a class="primitive" href="https://doc.rust-lang.org/1.72.0/std/primitive.usize.html">usize</a>, expr: <a class="enum" href="../expr/enum.Expr.html" title="enum clausy::core::expr::Expr">Expr</a>)</h4></section></summary><div class="docblock"><p>Mutates an expression in this arena.</p>
<p>This function replaces the expression for a given identifier with a new given expression.
It has no effect on leaves in the syntax tree (i.e., variables).
We must take several precautions to preserve structural sharing, as we perform an in-place mutation.
While this function may temporarily violate structural sharing when called for a given expression,
it also makes up for (i.e., “fixes”) said violation when called for every parent of said expression afterwards (see <a href="struct.Arena.html#method.canon_visitor" title="method clausy::core::arena::Arena::canon_visitor">Arena::canon_visitor</a>).
To do so, the function performs three steps:
First, every new child expression is checked for potential duplicates with existing expressions,
which we resolve using the canonical identifier obtained with <a href="struct.Arena.html#method.get_expr" title="method clausy::core::arena::Arena::get_expr">Arena::get_expr</a>.
Second, we replace the old expression with the new expression.
Third, as we might have changed the hash of the expression, we must invalidate it with <a href="struct.Arena.html#method.inval_expr" title="method clausy::core::arena::Arena::inval_expr">Arena::inval_expr</a>.
Because this function cleans up violations of children, it must be called after, not before children have been mutated.
Thus, it does not preserve structural sharing when used in <a href="struct.Arena.html#method.preorder_rev" title="method clausy::core::arena::Arena::preorder_rev">Arena::preorder_rev</a>, only in <a href="struct.Arena.html#method.postorder_rev" title="method clausy::core::arena::Arena::postorder_rev">Arena::postorder_rev</a>.
Besides guaranteeing structural sharing, we perform flattening and simplification on the expression, which usually produces smaller formulas.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.negate_exprs" class="method"><a class="srclink rightside" href="../../../src/clausy/core/arena.rs.html#348-353">source</a><h4 class="code-header">fn <a href="#method.negate_exprs" class="fn">negate_exprs</a>(&amp;mut self, ids: <a class="struct" href="https://doc.rust-lang.org/1.72.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.72.0/std/primitive.usize.html">usize</a>&gt;) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.72.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.72.0/std/primitive.usize.html">usize</a>&gt;</h4></section></summary><div class="docblock"><p>Returns expressions that negate the given expressions.</p>
<p>The returned expression identifiers are either created or looked up (see <a href="struct.Arena.html#method.expr" title="method clausy::core::arena::Arena::expr">Arena::expr</a>).</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.format_expr" class="method"><a class="srclink rightside" href="../../../src/clausy/core/arena.rs.html#360-385">source</a><h4 class="code-header">pub(super) fn <a href="#method.format_expr" class="fn">format_expr</a>(&amp;self, id: <a class="primitive" href="https://doc.rust-lang.org/1.72.0/std/primitive.usize.html">usize</a>, f: &amp;mut <a class="struct" href="https://doc.rust-lang.org/1.72.0/core/fmt/struct.Formatter.html" title="struct core::fmt::Formatter">Formatter</a>&lt;'_&gt;) -&gt; <a class="type" href="https://doc.rust-lang.org/1.72.0/core/fmt/type.Result.html" title="type core::fmt::Result">Result</a></h4></section></summary><div class="docblock"><p>Writes an expression in this arena to a formatter.</p>
<p>Used by <a href="https://doc.rust-lang.org/1.72.0/core/fmt/trait.Display.html" title="trait core::fmt::Display">fmt::Display</a> to print (parts of) a <a href="../formula/struct.Formula.html" title="struct clausy::core::formula::Formula">Formula</a>.
Implements a recursive preorder traversal.
For an iterative reversed preorder traversal, see <a href="struct.Arena.html#method.preorder_rev" title="method clausy::core::arena::Arena::preorder_rev">Arena::preorder_rev</a>.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.as_formula" class="method"><a class="srclink rightside" href="../../../src/clausy/core/arena.rs.html#390-392">source</a><h4 class="code-header">pub(crate) fn <a href="#method.as_formula" class="fn">as_formula</a>&lt;'a&gt;(&amp;'a self, root_id: <a class="primitive" href="https://doc.rust-lang.org/1.72.0/std/primitive.usize.html">usize</a>) -&gt; <a class="struct" href="../formula/struct.Formula.html" title="struct clausy::core::formula::Formula">Formula</a></h4></section></summary><div class="docblock"><p>Returns a formula with the given root expression.</p>
<p>The created formula references all variables of this arena, use <a href="../formula/struct.Formula.html#method.new" title="associated function clausy::core::formula::Formula::new">Formula::new</a> for more fine-grained sub-variables.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.preorder_rev" class="method"><a class="srclink rightside" href="../../../src/clausy/core/arena.rs.html#402-418">source</a><h4 class="code-header">pub(super) fn <a href="#method.preorder_rev" class="fn">preorder_rev</a>(
    &amp;mut self,
    root_id: &amp;mut <a class="primitive" href="https://doc.rust-lang.org/1.72.0/std/primitive.usize.html">usize</a>,
    visitor: impl <a class="trait" href="https://doc.rust-lang.org/1.72.0/core/ops/function/trait.FnMut.html" title="trait core::ops::function::FnMut">FnMut</a>(<a class="primitive" href="https://doc.rust-lang.org/1.72.0/std/primitive.reference.html">&amp;mut Self</a>, <a class="primitive" href="https://doc.rust-lang.org/1.72.0/std/primitive.usize.html">usize</a>)
)</h4></section></summary><div class="docblock"><p>Visits all sub-expressions of a given root expression using a reverse preorder traversal.</p>
<p>We assume that the given visitor only performs mutation with the designated methods,
such as <a href="struct.Arena.html#method.var_expr" title="method clausy::core::arena::Arena::var_expr">Arena::var_expr</a>, <a href="struct.Arena.html#method.expr" title="method clausy::core::arena::Arena::expr">Arena::expr</a> and <a href="struct.Arena.html#method.set_expr" title="method clausy::core::arena::Arena::set_expr">Arena::set_expr</a>.
The visitor is called at most once per unique sub-expression:
It will not be called several times on the same sub-expression (if the formula is in canonical form).
However, we can also not guarantee it to be called on all sub-expressions - as it might change the very set of sub-expressions.
For improved performance, the traversal is reversed, so children are traversed right-to-left.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.postorder_rev" class="method"><a class="srclink rightside" href="../../../src/clausy/core/arena.rs.html#424-448">source</a><h4 class="code-header">pub(super) fn <a href="#method.postorder_rev" class="fn">postorder_rev</a>(
    &amp;mut self,
    root_id: &amp;mut <a class="primitive" href="https://doc.rust-lang.org/1.72.0/std/primitive.usize.html">usize</a>,
    visitor: impl <a class="trait" href="https://doc.rust-lang.org/1.72.0/core/ops/function/trait.FnMut.html" title="trait core::ops::function::FnMut">FnMut</a>(<a class="primitive" href="https://doc.rust-lang.org/1.72.0/std/primitive.reference.html">&amp;mut Self</a>, <a class="primitive" href="https://doc.rust-lang.org/1.72.0/std/primitive.usize.html">usize</a>)
)</h4></section></summary><div class="docblock"><p>Visits all sub-expressions of a given root expression using a reverse postorder traversal.</p>
<p>Conceptually, this is similar to <a href="struct.Arena.html#method.preorder_rev" title="method clausy::core::arena::Arena::preorder_rev">Arena::preorder_rev</a>, but sub-expressions are visited bottom-up instead of top-down.
Also, this traversal can be used to ensure structural sharing if the visitor is correctly implemented (see <a href="struct.Arena.html#method.canon_visitor" title="method clausy::core::arena::Arena::canon_visitor">Arena::canon_visitor</a>).</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.prepostorder_rev" class="method"><a class="srclink rightside" href="../../../src/clausy/core/arena.rs.html#455-483">source</a><h4 class="code-header">pub(super) fn <a href="#method.prepostorder_rev" class="fn">prepostorder_rev</a>(
    &amp;mut self,
    root_id: &amp;mut <a class="primitive" href="https://doc.rust-lang.org/1.72.0/std/primitive.usize.html">usize</a>,
    pre_visitor: impl <a class="trait" href="https://doc.rust-lang.org/1.72.0/core/ops/function/trait.FnMut.html" title="trait core::ops::function::FnMut">FnMut</a>(<a class="primitive" href="https://doc.rust-lang.org/1.72.0/std/primitive.reference.html">&amp;mut Self</a>, <a class="primitive" href="https://doc.rust-lang.org/1.72.0/std/primitive.usize.html">usize</a>),
    post_visitor: impl <a class="trait" href="https://doc.rust-lang.org/1.72.0/core/ops/function/trait.FnMut.html" title="trait core::ops::function::FnMut">FnMut</a>(<a class="primitive" href="https://doc.rust-lang.org/1.72.0/std/primitive.reference.html">&amp;mut Self</a>, <a class="primitive" href="https://doc.rust-lang.org/1.72.0/std/primitive.usize.html">usize</a>)
)</h4></section></summary><div class="docblock"><p>Visits all sub-expressions of a given root expression using a combined reverse pre- and postorder traversal.</p>
<p>Can be used to efficiently interleave a preorder and postorder visitor.
Note that each interior expression is visited twice (with the pre- and then the postorder visitor).
However, the leaves (i.e., <a href="../var/enum.Var.html" title="enum clausy::core::var::Var">Var</a> expressions) are only visited once (with the postorder visitor).</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.canon_visitor" class="method"><a class="srclink rightside" href="../../../src/clausy/core/arena.rs.html#486-488">source</a><h4 class="code-header">pub(super) fn <a href="#method.canon_visitor" class="fn">canon_visitor</a>(&amp;mut self, id: <a class="primitive" href="https://doc.rust-lang.org/1.72.0/std/primitive.usize.html">usize</a>)</h4></section></summary><div class="docblock"><p>Transforms an expression into canonical form (see <a href="../formula/struct.Formula.html#method.to_canon" title="method clausy::core::formula::Formula::to_canon">Formula::to_canon</a>).</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.nnf_visitor" class="method"><a class="srclink rightside" href="../../../src/clausy/core/arena.rs.html#491-507">source</a><h4 class="code-header">pub(super) fn <a href="#method.nnf_visitor" class="fn">nnf_visitor</a>(&amp;mut self, id: <a class="primitive" href="https://doc.rust-lang.org/1.72.0/std/primitive.usize.html">usize</a>)</h4></section></summary><div class="docblock"><p>Transforms an expression into negation normal form by applying De Morgan’s laws (see <a href="../formula/struct.Formula.html#method.to_nnf" title="method clausy::core::formula::Formula::to_nnf">Formula::to_nnf</a>).</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.cnf_dist_visitor" class="method"><a class="srclink rightside" href="../../../src/clausy/core/arena.rs.html#510-545">source</a><h4 class="code-header">pub(super) fn <a href="#method.cnf_dist_visitor" class="fn">cnf_dist_visitor</a>(&amp;mut self, id: <a class="primitive" href="https://doc.rust-lang.org/1.72.0/std/primitive.usize.html">usize</a>)</h4></section></summary><div class="docblock"><p>Transforms an expression into canonical conjunctive normal form by applying distributivity laws (see <a href="../formula/struct.Formula.html#method.to_cnf_dist" title="method clausy::core::formula::Formula::to_cnf_dist">Formula::to_cnf_dist</a>).</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.def_and" class="method"><a class="srclink rightside" href="../../../src/clausy/core/arena.rs.html#552-566">source</a><h4 class="code-header">fn <a href="#method.def_and" class="fn">def_and</a>(&amp;mut self, var_expr_id: <a class="primitive" href="https://doc.rust-lang.org/1.72.0/std/primitive.usize.html">usize</a>, ids: &amp;[<a class="primitive" href="https://doc.rust-lang.org/1.72.0/std/primitive.usize.html">usize</a>]) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.72.0/std/primitive.i32.html">i32</a></h4></section></summary><div class="docblock"><p>Defines an <a href="../expr/enum.Expr.html#variant.And" title="variant clausy::core::expr::Expr::And">And</a> expression with a new auxiliary variable.</p>
<p>That is, we create a new auxiliary variable and clauses that let it imply all conjuncts and let it be implied by the conjunction.
As an optimization, we do not create a <a href="../var/enum.Var.html" title="enum clausy::core::var::Var">Var</a> expression for the new variable, as we are replacing an existing expression.
We add the new variable to <a href="struct.Arena.html#structfield.new_vars" title="field clausy::core::arena::Arena::new_vars">Arena::new_vars</a> and the clauses defining the new variable to <a href="struct.Arena.html#structfield.new_exprs" title="field clausy::core::arena::Arena::new_exprs">Arena::new_exprs</a>.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.def_or" class="method"><a class="srclink rightside" href="../../../src/clausy/core/arena.rs.html#572-585">source</a><h4 class="code-header">fn <a href="#method.def_or" class="fn">def_or</a>(&amp;mut self, var_expr_id: <a class="primitive" href="https://doc.rust-lang.org/1.72.0/std/primitive.usize.html">usize</a>, ids: &amp;[<a class="primitive" href="https://doc.rust-lang.org/1.72.0/std/primitive.usize.html">usize</a>]) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.72.0/std/primitive.i32.html">i32</a></h4></section></summary><div class="docblock"><p>Defines an <a href="../expr/enum.Expr.html#variant.Or" title="variant clausy::core::expr::Expr::Or">Or</a> expression with a new auxiliary variable.</p>
<p>That is, we create a new auxiliary variable and clauses that let it imply the disjunction and let it be implied by all disjuncts.
Works analogously to <a href="struct.Arena.html#method.def_and" title="method clausy::core::arena::Arena::def_and">Arena::def_and</a>.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.cnf_tseitin_visitor" class="method"><a class="srclink rightside" href="../../../src/clausy/core/arena.rs.html#588-600">source</a><h4 class="code-header">pub(super) fn <a href="#method.cnf_tseitin_visitor" class="fn">cnf_tseitin_visitor</a>(&amp;mut self, id: <a class="primitive" href="https://doc.rust-lang.org/1.72.0/std/primitive.usize.html">usize</a>)</h4></section></summary><div class="docblock"><p>Transforms an expression into canonical conjunctive normal form by introducing auxiliary variables (see <a href="../formula/struct.Formula.html#method.to_cnf_tseitin" title="method clausy::core::formula::Formula::to_cnf_tseitin">Formula::to_cnf_tseitin</a>).</p>
</div></details></div></details></div><h2 id="trait-implementations" class="small-section-header">Trait Implementations<a href="#trait-implementations" class="anchor">§</a></h2><div id="trait-implementations-list"><details class="toggle implementors-toggle" open><summary><section id="impl-FormulaParsee-for-Arena" class="impl"><a class="srclink rightside" href="../../../src/clausy/parser/mod.rs.html#68-72">source</a><a href="#impl-FormulaParsee-for-Arena" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="../../parser/trait.FormulaParsee.html" title="trait clausy::parser::FormulaParsee">FormulaParsee</a> for <a class="struct" href="struct.Arena.html" title="struct clausy::core::arena::Arena">Arena</a></h3></section></summary><div class="docblock"><p>Creates a feature-model formula from a feature-model formula file and parser.</p>
</div><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.parse" class="method trait-impl"><a class="srclink rightside" href="../../../src/clausy/parser/mod.rs.html#69-71">source</a><a href="#method.parse" class="anchor">§</a><h4 class="code-header">fn <a href="../../parser/trait.FormulaParsee.html#tymethod.parse" class="fn">parse</a>(&amp;mut self, file: &amp;<a class="primitive" href="https://doc.rust-lang.org/1.72.0/std/primitive.str.html">str</a>, parser: <a class="struct" href="https://doc.rust-lang.org/1.72.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="../../parser/trait.FormulaParser.html" title="trait clausy::parser::FormulaParser">FormulaParser</a>&gt;) -&gt; <a class="struct" href="../formula/struct.Formula.html" title="struct clausy::core::formula::Formula">Formula</a></h4></section></summary><div class='docblock'>Parses a feature-model formula into this object.</div></details></div></details></div><h2 id="synthetic-implementations" class="small-section-header">Auto Trait Implementations<a href="#synthetic-implementations" class="anchor">§</a></h2><div id="synthetic-implementations-list"><section id="impl-RefUnwindSafe-for-Arena" class="impl"><a href="#impl-RefUnwindSafe-for-Arena" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="https://doc.rust-lang.org/1.72.0/core/panic/unwind_safe/trait.RefUnwindSafe.html" title="trait core::panic::unwind_safe::RefUnwindSafe">RefUnwindSafe</a> for <a class="struct" href="struct.Arena.html" title="struct clausy::core::arena::Arena">Arena</a></h3></section><section id="impl-Send-for-Arena" class="impl"><a href="#impl-Send-for-Arena" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="https://doc.rust-lang.org/1.72.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> for <a class="struct" href="struct.Arena.html" title="struct clausy::core::arena::Arena">Arena</a></h3></section><section id="impl-Sync-for-Arena" class="impl"><a href="#impl-Sync-for-Arena" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="https://doc.rust-lang.org/1.72.0/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> for <a class="struct" href="struct.Arena.html" title="struct clausy::core::arena::Arena">Arena</a></h3></section><section id="impl-Unpin-for-Arena" class="impl"><a href="#impl-Unpin-for-Arena" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="https://doc.rust-lang.org/1.72.0/core/marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a> for <a class="struct" href="struct.Arena.html" title="struct clausy::core::arena::Arena">Arena</a></h3></section><section id="impl-UnwindSafe-for-Arena" class="impl"><a href="#impl-UnwindSafe-for-Arena" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="https://doc.rust-lang.org/1.72.0/core/panic/unwind_safe/trait.UnwindSafe.html" title="trait core::panic::unwind_safe::UnwindSafe">UnwindSafe</a> for <a class="struct" href="struct.Arena.html" title="struct clausy::core::arena::Arena">Arena</a></h3></section></div><h2 id="blanket-implementations" class="small-section-header">Blanket Implementations<a href="#blanket-implementations" class="anchor">§</a></h2><div id="blanket-implementations-list"><details class="toggle implementors-toggle"><summary><section id="impl-Any-for-Arena" class="impl"><a class="srclink rightside" href="https://doc.rust-lang.org/1.72.0/src/core/any.rs.html#201">source</a><a href="#impl-Any-for-Arena" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.72.0/core/any/trait.Any.html" title="trait core::any::Any">Any</a> for T<span class="where fmt-newline">where
    T: 'static + ?<a class="trait" href="https://doc.rust-lang.org/1.72.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</span></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.type_id" class="method trait-impl"><a class="srclink rightside" href="https://doc.rust-lang.org/1.72.0/src/core/any.rs.html#202">source</a><a href="#method.type_id" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.72.0/core/any/trait.Any.html#tymethod.type_id" class="fn">type_id</a>(&amp;self) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.72.0/core/any/struct.TypeId.html" title="struct core::any::TypeId">TypeId</a></h4></section></summary><div class='docblock'>Gets the <code>TypeId</code> of <code>self</code>. <a href="https://doc.rust-lang.org/1.72.0/core/any/trait.Any.html#tymethod.type_id">Read more</a></div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-Borrow%3CT%3E-for-Arena" class="impl"><a class="srclink rightside" href="https://doc.rust-lang.org/1.72.0/src/core/borrow.rs.html#208">source</a><a href="#impl-Borrow%3CT%3E-for-Arena" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.72.0/core/borrow/trait.Borrow.html" title="trait core::borrow::Borrow">Borrow</a>&lt;T&gt; for T<span class="where fmt-newline">where
    T: ?<a class="trait" href="https://doc.rust-lang.org/1.72.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</span></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.borrow" class="method trait-impl"><a class="srclink rightside" href="https://doc.rust-lang.org/1.72.0/src/core/borrow.rs.html#210">source</a><a href="#method.borrow" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.72.0/core/borrow/trait.Borrow.html#tymethod.borrow" class="fn">borrow</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.72.0/std/primitive.reference.html">&amp;T</a></h4></section></summary><div class='docblock'>Immutably borrows from an owned value. <a href="https://doc.rust-lang.org/1.72.0/core/borrow/trait.Borrow.html#tymethod.borrow">Read more</a></div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-BorrowMut%3CT%3E-for-Arena" class="impl"><a class="srclink rightside" href="https://doc.rust-lang.org/1.72.0/src/core/borrow.rs.html#216">source</a><a href="#impl-BorrowMut%3CT%3E-for-Arena" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.72.0/core/borrow/trait.BorrowMut.html" title="trait core::borrow::BorrowMut">BorrowMut</a>&lt;T&gt; for T<span class="where fmt-newline">where
    T: ?<a class="trait" href="https://doc.rust-lang.org/1.72.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</span></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.borrow_mut" class="method trait-impl"><a class="srclink rightside" href="https://doc.rust-lang.org/1.72.0/src/core/borrow.rs.html#217">source</a><a href="#method.borrow_mut" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.72.0/core/borrow/trait.BorrowMut.html#tymethod.borrow_mut" class="fn">borrow_mut</a>(&amp;mut self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.72.0/std/primitive.reference.html">&amp;mut T</a></h4></section></summary><div class='docblock'>Mutably borrows from an owned value. <a href="https://doc.rust-lang.org/1.72.0/core/borrow/trait.BorrowMut.html#tymethod.borrow_mut">Read more</a></div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-From%3CT%3E-for-Arena" class="impl"><a class="srclink rightside" href="https://doc.rust-lang.org/1.72.0/src/core/convert/mod.rs.html#722">source</a><a href="#impl-From%3CT%3E-for-Arena" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.72.0/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt; for T</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.from" class="method trait-impl"><a class="srclink rightside" href="https://doc.rust-lang.org/1.72.0/src/core/convert/mod.rs.html#725">source</a><a href="#method.from" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.72.0/core/convert/trait.From.html#tymethod.from" class="fn">from</a>(t: T) -&gt; T</h4></section></summary><div class="docblock"><p>Returns the argument unchanged.</p>
</div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-Into%3CU%3E-for-Arena" class="impl"><a class="srclink rightside" href="https://doc.rust-lang.org/1.72.0/src/core/convert/mod.rs.html#706">source</a><a href="#impl-Into%3CU%3E-for-Arena" class="anchor">§</a><h3 class="code-header">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/1.72.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;U&gt; for T<span class="where fmt-newline">where
    U: <a class="trait" href="https://doc.rust-lang.org/1.72.0/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt;,</span></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.into" class="method trait-impl"><a class="srclink rightside" href="https://doc.rust-lang.org/1.72.0/src/core/convert/mod.rs.html#715">source</a><a href="#method.into" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.72.0/core/convert/trait.Into.html#tymethod.into" class="fn">into</a>(self) -&gt; U</h4></section></summary><div class="docblock"><p>Calls <code>U::from(self)</code>.</p>
<p>That is, this conversion is whatever the implementation of
<code><a href="https://doc.rust-lang.org/1.72.0/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt; for U</code> chooses to do.</p>
</div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-TryFrom%3CU%3E-for-Arena" class="impl"><a class="srclink rightside" href="https://doc.rust-lang.org/1.72.0/src/core/convert/mod.rs.html#762">source</a><a href="#impl-TryFrom%3CU%3E-for-Arena" class="anchor">§</a><h3 class="code-header">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/1.72.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt; for T<span class="where fmt-newline">where
    U: <a class="trait" href="https://doc.rust-lang.org/1.72.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;T&gt;,</span></h3></section></summary><div class="impl-items"><details class="toggle" open><summary><section id="associatedtype.Error" class="associatedtype trait-impl"><a href="#associatedtype.Error" class="anchor">§</a><h4 class="code-header">type <a href="https://doc.rust-lang.org/1.72.0/core/convert/trait.TryFrom.html#associatedtype.Error" class="associatedtype">Error</a> = <a class="enum" href="https://doc.rust-lang.org/1.72.0/core/convert/enum.Infallible.html" title="enum core::convert::Infallible">Infallible</a></h4></section></summary><div class='docblock'>The type returned in the event of a conversion error.</div></details><details class="toggle method-toggle" open><summary><section id="method.try_from" class="method trait-impl"><a class="srclink rightside" href="https://doc.rust-lang.org/1.72.0/src/core/convert/mod.rs.html#769">source</a><a href="#method.try_from" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.72.0/core/convert/trait.TryFrom.html#tymethod.try_from" class="fn">try_from</a>(value: U) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.72.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;T, &lt;T as <a class="trait" href="https://doc.rust-lang.org/1.72.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/1.72.0/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</h4></section></summary><div class='docblock'>Performs the conversion.</div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-TryInto%3CU%3E-for-Arena" class="impl"><a class="srclink rightside" href="https://doc.rust-lang.org/1.72.0/src/core/convert/mod.rs.html#747">source</a><a href="#impl-TryInto%3CU%3E-for-Arena" class="anchor">§</a><h3 class="code-header">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/1.72.0/core/convert/trait.TryInto.html" title="trait core::convert::TryInto">TryInto</a>&lt;U&gt; for T<span class="where fmt-newline">where
    U: <a class="trait" href="https://doc.rust-lang.org/1.72.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;,</span></h3></section></summary><div class="impl-items"><details class="toggle" open><summary><section id="associatedtype.Error-1" class="associatedtype trait-impl"><a href="#associatedtype.Error-1" class="anchor">§</a><h4 class="code-header">type <a href="https://doc.rust-lang.org/1.72.0/core/convert/trait.TryInto.html#associatedtype.Error" class="associatedtype">Error</a> = &lt;U as <a class="trait" href="https://doc.rust-lang.org/1.72.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/1.72.0/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a></h4></section></summary><div class='docblock'>The type returned in the event of a conversion error.</div></details><details class="toggle method-toggle" open><summary><section id="method.try_into" class="method trait-impl"><a class="srclink rightside" href="https://doc.rust-lang.org/1.72.0/src/core/convert/mod.rs.html#754">source</a><a href="#method.try_into" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.72.0/core/convert/trait.TryInto.html#tymethod.try_into" class="fn">try_into</a>(self) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.72.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;U, &lt;U as <a class="trait" href="https://doc.rust-lang.org/1.72.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/1.72.0/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</h4></section></summary><div class='docblock'>Performs the conversion.</div></details></div></details></div></section></div></main></body></html>